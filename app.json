{
	"id": "com.uc.heimdall",
	"sdk": 2,
	"permissions": [ "homey:manager:api", "homey:manager:speech-output" ],
	"name": { "en": "Heimdall"},
	"description": { "en": "This app turns homey into a simple surveillance system" },
	"category": [ "security", "tools" ],
	"images": { "large": "assets/images/large.png", "small": "assets/images/small.png" },
	"version": "2.0.15",
	"compatibility": ">=2.0",
	"brandColor": "#4BD762",
	"author": { "name": "Danee de Kruyff", "email": "daneedekruyff@outlook.com" },
	"contributors": {
		"developers": [{"name": "Danee de Kruyff","email": "daneedekruyff@outlook.com"}],
		"translators": [{"name": "Philipp Schnittger"}]
	},
	"contributing": {
		"donate": {
		  "paypal": {
			"username": "daneedekruyff"
		  }
		}
	},
	"tags": {
		"en": [ "Home", "Alarm", "Alert", "Homeyalarm", "System", "Security", "Tools", "Log", "Surveillance" ],
		"nl": [ "Huis", "Alarm", "Homeyalarm", "Systeem", "Beveilig", "Beveiliging", "Toezicht" ],
		"de": [ "Heim", "Alarm", "Warnung", "Homeyalarm", "System", "Werkzeuge", "Log", "Überwachung" ],
		"fr": [ "Home", "Alarm", "Alert", "Homeyalarm", "System", "Security", "Tools", "Log", "Surveillance" ]
	},
	"homeyCommunityTopicId": 134,
	"flow": {
		"triggers": [
		{
			"id": "SurveillanceChanged",
			"title": {
				"en": "Surveillance Mode changed.",
				"nl": "Toezicht modus is gewijzigd.",
				"de": "Überwachungsmodus geändert.",
				"fr": "Surveillance Mode changed."
			},
			"tokens": [
				{
					"name": "mode",
					"type": "string",
					"title": {
						"en": "Surveillance Mode",
						"nl": "Toezicht Modus",
						"de": "Überwachungsmodus",
						"fr": "Surveillance Mode"
					},
					"example": "Disarmed"
				}
			]
		},
		{
			"id": "sensorActiveAtArming",
			"title": {
				"en": "Sensor active at arming.",
				"nl": "sensor actief bij inschakelen.",
				"de": "Sensor aktiv bei Einschaltung.",
				"fr": "Sensor active at arming."
			},
			"tokens": [
				{
					"name": "warning",
					"type": "string",
					"title": {
						"en": "Warning",
						"nl": "Waarschuwing",
						"de": "Warnung",
						"fr": "Warning"
					},
					"example": "Warning, sensor is active."
				}
			]
		},
		{
			"id": "sensorActiveAtSensorCheck",
			"title": {
				"en": "Sensor active at Status Check.",
				"nl": "Sensor actief bij status controle.",
				"de": "Sensor aktiv bei Status Überprufing.",
				"fr": "Sensor active at Status Check."
			},
			"tokens": [
				{
					"name": "Device",
					"type": "string",
					"title": {
						"en": "Device",
						"nl": "Apparaat",
						"de": "Gerät",
						"fr": "Device"
					},
					"example": "Front door"
				},
				{
					"name": "Device type",
					"type": "string",
					"title": {
						"en": "Device type",
						"nl": "Apparaat type",
						"de": "Gerät",
						"fr": "Device type"
					},
					"example": "Contact"
				},
				{
					"name": "Zone",
					"type": "string",
					"title": {
						"en": "Zone",
						"nl": "Zone",
						"de": "Zone",
						"fr": "Zone"
					},
					"example": "Hallway"
				},
				{
					"name": "State",
					"type": "string",
					"title": {
						"en": "State",
						"nl": "Status",
						"de": "Status",
						"fr": "State"
					},
					"example": "Open"
				}
			]
		},
		{
			"id": "AlarmActivated",
			"title": {
				"en": "The alarm is activated.",
				"nl": "Het alarm is geactiveerd.",
				"de": "Alarm ausgelöst",
				"fr": "The alarm is activated."
			},
			"tokens": [
				{
					"name": "Reason",
					"type": "string",
					"title": {
						"en": "Reason",
						"nl": "Reden",
						"de": "Grund",
						"fr": "Reason"
					},
					"example": "A door opened"
				},
				{
					"name": "Zone",
					"type": "string",
					"title": {
						"en": "Zone",
						"nl": "Zone",
						"de": "Zone",
						"fr": "Zone"
					},
					"example": "Hallway"
				}
			]
		},
		{
			"id": "AlarmDeactivated",
			"title": {
				"en": "The alarm is deactivated.",
				"nl": "Het alarm is gedeactiveerd.",
				"de": "Alarm ist deaktiviert.",
				"fr": "The alarm is deactivated."
			},
			"tokens": [
				{
					"name": "Source",
					"type": "string",
					"title": {
						"en": "Source",
						"nl": "Bron",
						"de": "Quelle",
						"fr": "Source"
					},
					"example": "Alarm Off Button"
				}
			]
		},
		{
			"id": "AlarmDelayActivated",
			"title": {
				"en": "The alarm delay is activated.",
				"nl": "De alarm vertraging is geactiveerd.",
				"de": "Alarmverzögerung ist aktiviert.",
				"fr": "The alarm delay is activated."
			},
			"tokens": [
				{
					"name": "Reason",
					"type": "string",
					"title": {
						"en": "Reason",
						"nl": "Reden",
						"de": "Grund",
						"fr": "Reason"
					},
					"example": "Door Sensor: Open"
				},
				{
					"name": "Duration",
					"type": "number",
					"title": {
						"en": "Duration",
						"nl": "Duur",
						"de": "Dauer",
						"fr": "Duration"
					},
					"example": 30
				}
			]
		},
		{
			"id": "ArmDelayActivated",
			"title": {
				"en": "The arming delay is activated.",
				"nl": "De inschakel vertraging is geactiveerd.",
				"de": "Aktivierungcountdown ist aktiviert.",
				"fr": "The arming delay is activated."
			},
			"tokens": [
				{
					"name": "Duration",
					"type": "number",
					"title": {
						"en": "Duration",
						"nl": "Duur",
						"de": "Dauer",
						"fr": "Duration"
					},
					"example": 30
				}
			]
			
		},
		{
			"id": "TimeTillAlarm",
			"title":{
				"en": "The time untill alarm changed",
				"nl": "De tijd tot alarm wijzigt",
				"de": "Zeit bis zum Alarm geändert",
				"fr": "The time untill alarm changed"
			},
			"tokens": [
				{
					"name": "AlarmTimer",
					"type": "number",
					"title": {
						"en": "Seconds untill alarm",
						"nl": "Seconden tot alarm",
						"de": "Sekunden",
						"fr": "Seconds untill alarm"
					},
					"example": 30
				}
			]
		},
		{
			"id": "TimeTillArmed",
			"title":{
				"en": "The time untill armed changed",
				"nl": "De tijd tot ingeschakeld wijzigt",
				"de": "Zeit bis Aktivierung geändert",
				"fr": "The time untill armed changed"
			},
			"tokens": [
				{
					"name": "ArmedTimer",
					"type": "number",
					"title": {
						"en": "Seconds untill armed",
						"nl": "Seconden tot armed",
						"de": "Sekunden bis Aktivierung",
						"fr": "Seconds untill armed"
					},
					"example": 30
				}
			]
		},
		{
			"id": "LogLineWritten",
			"title":{
				"en": "A logline was written",
				"nl": "Een logregel is geschreven",
				"de": "Eine Meldung wurde geschrieben",
				"fr": "A logline was written"
			},
			"tokens": [
				{
					"name": "Device",
					"type": "string",
					"title": {
						"en": "Device",
						"nl": "Apparaat",
						"de": "Gerät",
						"fr": "Device"
					},
					"example": "Motion Sensor"
				},
				{
					"name": "State",
					"type": "string",
					"title": {
						"en": "State",
						"nl": "Status",
						"de": "Status",
						"fr": "State"
					},
					"example": "Motion detected"
				}
			]
		},
		{
			"id": "SensorTrippedInAlarmstate",
			"title": {
				"en": "Sensor tripped in Alarmstate",
				"nl": "Sensor actief in Alarmstatus",
				"de": "Sensor ausgelöst in Alarmstatus",
				"fr": "Sensor tripped in Alarmstate"
			},
			"tokens": [
				{
					"name": "State",
					"type": "string",
					"title": {
						"en": "State",
						"nl": "Status",
						"de": "Status",
						"fr": "State"
					},
					"example": "Motion detected"
				},
				{
					"name": "Device",
					"type": "string",
					"title": {
						"en": "Device",
						"nl": "Apparaat",
						"de": "Gerät",
						"fr": "Device"
					},
					"example": "Motion Sensor"
				},
				{
					"name": "Zone",
					"type": "string",
					"title": {
						"en": "Zone",
						"nl": "Zone",
						"de": "Zone",
						"fr": "Zone"
					},
					"example": "Hallway"
				}
			]
		},
		{
			"id": "noInfoReceived",
			"title" :{
				"en": "No information received",
				"nl": "Geen informatie ontvangen",
				"de": "Keine Informationen empfangen",
				"fr": "No information received"
			},
			"tokens": [
				{
					"name": "Duration",
					"type": "number",
					"title": {
						"en": "Hours no information",
						"nl": "Uren geen informatie",
						"de": "Stunden keine Informationen",
						"fr": "Hours no information"
					},
					"example": 24
				},
				{
					"name": "LastUpdate",
					"type": "string",
					"title": {
						"en": "Last update",
						"nl": "Laatste bericht",
						"de": "Letztes Update",
						"fr": "Last update"
					},
					"example": "2019-01-15 13:37:00"
				},
				{
					"name": "Device",
					"type": "string",
					"title": {
						"en": "Device",
						"nl": "Apparaat",
						"de": "Gerät",
						"fr": "Device"
					},
					"example": "Motion Sensor"
				},
				{
					"name": "Zone",
					"type": "string",
					"title": {
						"en": "Zone",
						"nl": "Zone",
						"de": "Zone",
						"fr": "Zone"
					},
					"example": "Living Room"
				}
			]
		}
		],
		"conditions": [
			{
				"id": "SurveillanceIs",
				"title": {
					"en": "Surveillance mode is !{{ |not }}",
					"nl": "Toezicht mode is !{{ |niet }}",
					"de": "Überwachungsmodus ist !{{ |nicht }}",
					"fr": "Surveillance mode is !{{ |not }}"
				},
				"args": [
					{
					  	"name": "surveillance",
					  	"type": "dropdown",
					  	"values": [
								{
									"id": "armed",
									"label": {
										"en": "Armed",
										"nl": "Ingeschakeld",
										"de": "Aktiviert",
										"fr": "Armed"
									}
								},
								{
									"id": "disarmed",
									"label": {
										"en": "Disarmed",
										"nl": "Uitgeschakeld",
										"de": "Deaktiviert",
										"fr": "Disarmed"
									}
								},
								{
									"id": "partially_armed",
									"label": {
										"en": "Partially Armed",
										"nl": "Deels ingeschakeld",
										"de": "Teilweise aktiviert",
										"fr": "Partially Armed"
									}
								}
					  	]
					}
				]
			},
			{
				"id": "ArmingCountdown",
				"title": {
					"en": "Arming countdown !{{active |not active}}",
					"nl": "Inschakel vertraging !{{actief |niet actief}}",
					"de": "Aktivierungcountdown !{{aktiv |nicht aktiv}}",
					"fr": "Arming countdown !{{active |not active}}"
				}
			},
			{
				"id": "AlarmCountdown",
				"title": {
					"en": "Alarm countdown !{{active |not active}}",
					"nl": "Alarm vertraging !{{actief |niet actief}}",
					"de": "Alarmcountdown !{{aktiv |nicht aktiv}}",
					"fr": "Alarm countdown !{{active |not active}}"
				}
			},
			{
				"id": "AlarmActive",
				"title": {
					"en": "Alarm state is !{{active |not active}}",
					"nl": "Alarm status is !{{actief |niet actief}}",
					"de": "Alarmstatus !{{aktiv |nicht aktiv}}",
					"fr": "Alarm state is !{{active |not active}}"
				}
			}
		],
		"actions": [
		{
			"id": "SetSurveillance",
			"title": {
				"en": "Set Surveillance Mode",
				"nl": "Stel Toezicht Modus in",
				"de": "Überwachungsmodus stellen",
				"fr": "Set Surveillance Mode"
			},
			"args": [
				{
					  "name": "surveillance",
					  "type": "dropdown",
					  "values": [
						{
							"id": "armed",
							"label": {
								"en": "Armed",
								"nl": "Ingeschakeld",
								"de": "Aktiviert",
								"fr": "Armed"
							}
						},
						  {
							"id": "disarmed",
							"label": {
								"en": "Disarmed",
								"nl": "Uitgeschakeld",
								"de": "Deaktiviert",
								"fr": "Disarmed"
							}
						  },
						  {
							"id": "partially_armed",
							"label": {
								"en": "Partially Armed",
								"nl": "Deels ingeschakeld",
								"de": "Teilweise aktiviert",
								"fr": "Partially Armed"
							}
						  }
					  ]
				},
				{
					"name": "device",
					"type": "device",
					"filter": "driver_id=surveillanceModeSwitch"
				}
			]
		},
		{
			"id": "SendInfo",
			"title": {
				"en": "Send information to Heimdall",
				"nl": "Stuur informatie naar Heimdall",
				"de": "Sende Informationen an Heimdall",
				"fr": "Send information to Heimdall"
			},
			"args": [{
				"name": "log",
				"type": "text"
			}]
		},
		{
			"id": "ClearHistory",
			"title": {
				"en": "Clear Heimdall history",
				"nl": "Verwijder Heimdall geschiedenis",
				"de": "Lösche alle Heimdall Ereignisse",
				"fr": "Clear Heimdall history"
			}
		},
		{
			"id": "ActivateAlarm",
			"title": {
				"en": "Activate Alarm",
				"nl": "Activeer Alarm",
				"de": "Aktiviere Alarm",
				"fr": "Activate Alarm"
			}
		},
		{
			"id": "DeactivateAlarm",
			"title": {
				"en": "Deactivate Alarm",
				"nl": "Deactiveer Alarm",
				"de": "Deaktiviere Alarm",
				"fr": "Deactivate Alarm"
			}
		},
		{
			"id": "CheckLastCommunication",
			"title": {
				"en": "Check Last Communication",
				"nl": "Controleer laatste communicatie",
				"de": "Kontrolliere letzte Kommunikation",
				"fr": "Check Last Communication"
			}
		},
		{
			"id": "DevicesStateCheck",
			"title": {
				"en": "Check status of all sensors",
				"nl": "Controleer de status van alle sensoren",
				"de": "Überprüfe Status aller Sensoren",
				"fr": "Check status of all sensors"
			}
		},
		{
			"id": "SendNotification",
			"title": {
				"en": "Send information to Timeline",
				"nl": "Stuur informatie naar Timeline",
				"de": "Sende Informationen an Timeline",
				"fr": "Send information to Timeline"
			},
			"args": [{
				"name": "message",
				"type": "text"
			}]
		}
		]
	},
	"capabilities": {
		"homealarm_state": {
			"type": "enum",
			"title": {
			  "en": "Home Alarm state",
			  "nl": "Thuisalarm status",
			  "de": "Heim Alarm Status",
				"fr": "Home Alarm state"
			},
			"values": [
			  {
				"id": "armed",
				"title": {
				  "en": "Armed",
				  "nl": "Ingeschakeld",
				  "de": "Gesichert",
					"fr": "Armed"
				}
			  },
			  {
				"id": "disarmed",
				"title": {
				  "en": "Disarmed",
				  "nl": "Uitgeschakeld",
				  "de": "Entsichert",
					"fr": "Disarmed"
				}
			  },
			  {
				"id": "partially_armed",
				"title": {
				  "en": "Partially armed",
				  "nl": "Deels ingeschakeld",
				  "de": "Teils gesichert",
					"fr": "Partially armed"
				}
			  }
			],
			"getable": true,
			"setable": true,
			"uiComponent": "picker"
		},
		"alarm_heimdall": {
        "type": "boolean",
        "title": {
				"en": "state",
				"nl": "status",
				"de": "status",
				"fr": "state"
			},
			"desc": "The Alarm status",
      "getable": true,
			"setable": true,
			"uiComponent": "sensor",
			"icon": "drivers/alarmOffSwitch/assets/alarm.svg"
		},
		"alarm_generic": {
			"type": "boolean",
			"title": {
				"en": "state",
				"nl": "status",
				"de": "status",
				"fr": "state"
			},
			"desc": "The Alarm status",
			"getable": true,
			"setable": true,
			"uiComponent": null,
			"icon": "drivers/alarmOffSwitch/assets/alarm.svg"
		}
	},
	"drivers": [
		{
			"id": "surveillanceModeSwitch",
			"name": {
				"en": "Mode",
				"nl": "Modus",
				"de": "Modus",
				"fr": "Mode"
				},
			"images": {
				"large": "drivers/surveillanceModeSwitch/assets/images/large.png",
				"small": "drivers/surveillanceModeSwitch/assets/images/small.png"
			},
			"class": "sensor",
			"capabilities": [ "homealarm_state", "button", "alarm_heimdall", "alarm_generic" ],
			"capabilitiesOptions":  {
				"homealarm_state": {
					"desc": "The Surveillance Mode",
					"preventTag": true
				},
				"button": {
					"title":{
						"en": "Turn off",
						"nl": "Schakel uit",
						"de": "Ausschalten",
						"fr": "Turn off"
					},
					"desc": "Button to turn Alarm off",
					"preventTag": true
				},
				"alarm_heimdall": {
					"preventTag": true,
					"titleTrue": {
						"en": "ALARM",
						"nl": "ALARM",
						"de": "ALARM",
						"fr": "ALARM"
					},
					"titleFalse": {
						"en": "All is quiet",
						"nl": "Alles ok",
						"de": "Alles ok",
						"fr": "All is quiet"
					}
				}
			},
			"pair": [
				{
					"id": "list_triggers",
					"template": "list_devices",
					"navigation": {
						"next": "add_triggers"
					}
				},
				{
					"id": "add_triggers",
					"template": "add_devices"
				}
			]
		},
		{
			"id": "alarmOffSwitch",
			"name": {
				"en": "Alarm",
				"nl": "Alarm",
				"de": "Alarm",
				"fr": "Alarm"
			},
			"images": {
				"large": "drivers/alarmOffSwitch/assets/images/large.png",
				"small": "drivers/alarmOffSwitch/assets/images/small.png"
			},
			"class": "sensor",
			"capabilities": [ "button", "alarm_heimdall", "alarm_generic" ],
			"capabilitiesOptions":  {
				"button": {
					"title":{
						"en": "Turn off",
						"nl": "Schakel uit",
						"de": "Ausschalten",
						"fr": "Turn off"
					},
					"desc": "Button to turn Alarm off",
					"preventTag": true
				},
				"alarm_heimdall": {
					"preventTag": true,
					"titleTrue": {
						"en": "ALARM",
						"nl": "ALARM",
						"de": "ALARM",
						"fr": "ALARM"
					},
					"titleFalse": {
						"en": "All is quiet",
						"nl": "Alles ok",
						"de": "Alles ok",
						"fr": "All is quiet"
					}
				}
			},
			"pair": [
				{
					"id": "list_triggers",
					"template": "list_devices",
					"navigation": {
						"next": "add_triggers"
					}
				},
				{
					"id": "add_triggers",
					"template": "add_devices"
				}
			]
		}
	]
}
